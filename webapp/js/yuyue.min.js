function charToInt(t){if(null==t||""==t)return"";var e={},n="";e[0]=t.charAt(0),n=e[0].charCodeAt();for(var o=1;o<t.length;o++)e[o]=t.charAt(o),n=n+","+e[o].charCodeAt();return n}function submitLinsten(t,e,n,o,i,r,a){var l=t+"/listen.jspx?callbak=?&",d="";d+=e?"contentId="+a+"&":"contentId=557901&",d+="name="+charToInt(i)+"&",d+="phoneNo="+r+"&",l+=d+="siteId=13&",$.getJSON(l,function(t){t.success?null!=o&&"function"==typeof o?o():diyAlert("您的预约已提交，我们会尽快与您取得联系！"):diyAlert(3==t.status?"您的预约已提交，我们会尽快与您取得联系！":"您的预约已提交，我们会尽快与您取得联系！")})}function validateLinsten(t,e,n,o,i){var r=!0,a="",l="",d="",s=$("#courseName").text(),c=$(t).find("input[name='name']").val(),u=$(t).find("input[name='phoneNo']").val();isEmpty(c)||eq(c,$(t).find("input[name='name']").attr("val"))?(l+="您的名字不能为空!",r=!1):rightReg(c,/^[\u0391-\uFFE5]+$/)||(l+="您的名字只能是中文名!",r=!1),isEmpty(u)||eq(u,$(t).find("input[name='phoneNo']").attr("val"))?(d+="您的电话不能为空!",r=!1):rightReg(u,/^1(3|4|5|6|7|8|9)\d{9}$/)||(d+="您的电话格式不正确!",r=!1),"请选择预约科目"===s&&(a+="请选择预约科目!",r=!1),c="姓名："+c+" -- 所选课程："+s,r?submitLinsten(e,n,null,o,c,u,i):diyAlert("以下原因导致提交失败",a,l,d)}function rightReg(t,e){return new RegExp(e).test(t)}function eq(t,e){return t==e}function isEmpty(t){return null==t||""==t}function diyAlert(){$("body").append('<div id="mask-layer"><div id="alert-box"><div id="alert-head"><h4>消息</h4><span id="alert-icon">×</span></div><ul id="alert-msg"></ul><input id="alert-btn" type="button" value="确定" /></div></div>');for(var t=0;t<arguments.length;t++)$("#alert-msg").append("<li>"+arguments[t]+"</li>");GenerateCss(),$("#alert-btn, #alert-icon").click(function(){$("#mask-layer").remove()})}function GenerateCss(){$("#mask-layer").css({width:"100%",height:"100%",position:"fixed",zIndex:"99999",top:"0",left:"0",backgroundColor:"rgba(0, 0, 0, 0.6)"}),$("#alert-box").css({position:"absolute",width:"80%",backgroundColor:"#fff",boxShadow:"2px 2px 5px #333",borderRadius:"10px"}),$("#alert-head").css({height:"40px",lineHeight:"40px",fontSize:"16px",fontWeight:"bold",padding:"0 16px 0 20px",backgroundColor:"#eee",borderRadius:"10px 10px 0 0",borderBottom:"2px solid #2a7dee"}),$("#alert-head > h4").css({float:"left",color:"#000"}),$("#alert-icon").css({float:"right",color:"#449cf6"}),$("#alert-msg").css({padding:"20px",borderBottom:"1px solid #ddd"}),$("#alert-msg li").css({fontSize:"14px",color:"#f00",lineHeight:"24px",textAlign:"center"}),$("#alert-msg li:first()").css({fontSize:"16px",color:"#000",marginBottom:"5px"}),$("#alert-btn").css({width:"100%",height:"40px",fontSize:"16px",fontWeight:"bold",color:"#449cf6",border:"none",borderRadius:"10px",backgroundColor:"#fff"});var t=document.documentElement.clientWidth,e=document.documentElement.clientHeight,n=$("#alert-box").width(),o=$("#alert-box").height();$("#alert-box").css({top:(e-o)/2+"px",left:(t-n)/2+"px"})}$(function(){new Bselector({showSelected:"#courseName",options:[{text:"雅思课程"},{text:"托福课程"},{text:"SAT课程"}]}),$(".submit").on("click",function(t){validateLinsten(".form","http://zyadmin.xhd.cn",!0,function(){$(".form-container").hide();diyAlert("恭喜，您已预约成功！","我们会在1个工作日内联系您！")},702927),t.preventDefault()})});